/*!CK:1996069116!*//*1418014735,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["afnAr"]); }

__d("EditAppSettings",["AsyncRequest","CSS","DeprecatedCSSMiscellany","Dialog","$","emptyFunction","ge","htmlize","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={currentTab:(void 0),callbackUrl:'/ajax/edit_app_settings.php',statusElement:'edit_app_settings_save_fill',profileHandler:l,extendedHandler:l,appID:0,setup:function(q,r,s){this.appID=q;this.profileID=r;this.currentTab=s;return this;},_getCurrentTab:function(){if(!this.currentTab){var q=['profile','bookmark','extended'];for(var r=0;r<q.length;r++)if(m(this._getTabId(q[r]))){this.currentTab=q[r];break;}}return this.currentTab;},_getTabId:function(q){return q+'_tab_link';},setupHandlers:function(q){this.profileHandler=q.profile||l;this.extendedHandler=q.extended||l;},switchTab:function(q){h.removeClass(this._getTabId(this._getCurrentTab()),'tab_link_selected');i.hide('app_settings_'+this._getCurrentTab()+'_tab');h.addClass(this._getTabId(q),'tab_link_selected');i.show('app_settings_'+q+'_tab');this.currentTab=q;},isUiMode:function(){return j.getCurrent();},setExtendedPermission:function(q,r){var s=m('explanation_'+q);if(s)if(r){i.hide(s);}else i.show(s);var t=new g().setURI(this.callbackUrl).setHandler(this.extendedHandler.bind(this,this.appID,q)).setData({extended:1,permission:q,allow:r,profile_id:this.profileID,app_id:this.appID});if(this.isUiMode())t.setStatusElement(this.statusElement);t.send();return true;},makeProfileChange:function(q){var r=new g().setURI(this.callbackUrl).setHandler(this.profileHandler.bind(this,this.appID)).setData({profile:1,item:'tab',action:q,app_id:this.appID,profile_id:this.profileID});if(this.isUiMode())r.setStatusElement(this.statusElement);r.send();if(this.isUiMode()){i.toggleDisplayNone('app_settings_profile_tab_add');i.toggleDisplayNone('app_settings_profile_tab_remove');h.toggleClass(k('profile_tab_name_changer'),'hidden_elem');}},removeApplication:function(q){var r=q||l,s={remove:1,app_id:this.appID,profile_id:this.profileID};new g().setURI(this.callbackUrl).setHandler(r).setData(s).send();},blockApplication:function(q){var r=q||l;new g().setURI(this.callbackUrl).setHandler(r).setData({block:1,app_id:this.appID,profile_id:this.profileID}).send();},setBlockComposer:function(q,r){new g().setURI(this.callbackUrl).setHandler(r||l).setData({composer:1,blocked_composer:q,profile_id:this.profileID,app_id:this.appID}).send();},reviveComposerDialog:function(q,r){var s=o._("Unblock {app-name} Publisher?",[o.param("app-name",n(q))]),t='<p>'+"Are you sure you want to allow this application's publisher on your profile?"+'</p>',u="Unblock";new j().setTitle(s).setBody(t).setButtons([{name:'remove',label:u},j.CANCEL]).setHandler(this.setBlockComposer.bind(this,0,r)).show();}};e.exports=p;},null);
__d("EditAppsController",["DeprecatedCSSMiscellany","Dialog","EditAppSettings","URI","$","ge","goURI","htmlize","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={BOOKMARKS_VIEW:'bookmarks',currentView:'',sortableGroup:null,ownedApps:null,init:function(q,r){this.profileID=q;this.ownedApps=r;i.setupHandlers({profile:this.changeProfileCallback,extended:this.setExtendedPermissionCallback});},setView:function(q){this.currentView=q;},switchView:function(q){m(new j('/editapps.php').addQueryData({v:q}).toString());},changeProfileCallback:function(q){if(l('editapps_tab_'+q)){g.toggleDisplayNone('editapps_tab_'+q);g.toggleDisplayNone('editapps_tab_'+q+'_undo');}},removeApplication:function(q,r,s){var t=n(r),u=o._("Remove {application-name}?",[o.param("application-name",t)]),v='<p>'+o._("If you remove {application-name}, it will be taken off your timeline, bookmarks and from the list of apps you use in your settings. You can also block apps to prevent them from accessing the non-public information you share with others who use them.",[o.param("application-name",t)])+'</p>';v+='<input type="hidden" name="remove_appId" value="'+q+'" />';var w={name:'remove',label:"Remove"},x=[w,h.CANCEL];v='<div class="remove_application_dialog">'+v+'</div>';new h().setTitle(u).setBody(v).setButtons(x).setModal(true).setHandler(function(){i.setup(q,this.profileID).removeApplication(s);}).show();return false;},setExtendedPermission:function(q,r,s){i.setup(q,this.profileID).setExtendedPermission(r,s);return true;},setExtendedPermissionCallback:function(q,r){g.toggleDisplayNone('editapps_extperm_'+r+'_'+q);g.toggleDisplayNone('editapps_extperm_'+r+'_'+q+'_undo');},addSortable:function(q){var r=k('editapps_bookmarked_wrapper_'+q);this.sortableGroup.addSortable(q,r);}};e.exports=p;},null);
__d("legacy:edit-apps-page",["EditAppsController"],function(a,b,c,d){a.EditAppsController=b('EditAppsController');},3);
__d("SendToMobile",["Arbiter","copyProperties","CSS","DOMEventListener"],function(a,b,c,d,e,f,g,h,i,j){function k(l){this.enabledItem=l.enabledItem;this.loadingItem=l.loadingItem;this.disabledItem=l.disabledItem;this.loadingIndicator=l.loadingIndicator;this.elementReferences=l.elementReferences;this.type=l.type;var m=function(n){this.startSend();}.bind(this);j.add(this.enabledItem,'click',m);g.subscribe('platform/send_to_mobile/complete',this.complete.bind(this),g.SUBSCRIBE_NEW);g.subscribe('platform/send_to_mobile/failure',this.reset.bind(this),g.SUBSCRIBE_NEW);}h(k.prototype,{startSend:function(){i.hide(this.enabledItem);if(this.type==='button'){i.show(this.loadingIndicator);this.elementReferences.loadingButton.appendChild(this.loadingIndicator);}i.show(this.loadingItem);this.started=true;},reset:function(){i.hide(this.loadingItem);i.show(this.enabledItem);if(this.type==='button'||this.type==='plugin')i.hide(this.loadingIndicator);},complete:function(){if(this.started){i.hide(this.loadingItem);i.show(this.disabledItem);}this.started=false;}});e.exports=k;},null);